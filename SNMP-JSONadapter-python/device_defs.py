import device_helpers as helpers
from methods import get, getnext, lookup


"""
Device-specific map for Liebert GXT3.  Most points are based on RFC1628 standards.
"""
LIEBERT_GXT3 = {
    '_tables' : [
            {
            'name'                  : 'alarm',
            'poll_function'         : (getnext, {'oid':'1.3.6.1.2.1.33.1.6.2.1.2'}),
            'conversion_function'   : helpers.RFC1628_alarmtable, 
            }
        ],

    '_points' : [
            {
            'name'          : 'input_voltage',
            'poll_function' : (get, {'oid':'1.3.6.1.2.1.33.1.3.3.1.3.1'}),
            },
            {
            'name'          : 'input_current',
            'poll_function' : (get, {'oid':'1.3.6.1.2.1.33.1.3.3.1.4.1'}),
            'conversion_function' : lambda x: float(x)/10
            },
            {
            'name'          : 'input_frequency',
            'poll_function' : (get, {'oid':'1.3.6.1.2.1.33.1.3.3.1.2.1'}),
            'conversion_function' : lambda x: float(x)/10
            },
            {
            'name'          : 'input_state',
            'poll_function' : (lookup, {'table':'alarm', 'value':'1.3.6.1.2.1.33.1.6.3.6'}),
            'conversion_function': helpers.RFC1628_alarmspresent
            },
            {
            'name'          : 'output_voltage',
            'poll_function' : (get, {'oid':'1.3.6.1.2.1.33.1.4.4.1.2.1'}),
            },
            {
            'name'          : 'output_current',
            'poll_function' : (get, {'oid':'1.3.6.1.2.1.33.1.4.4.1.3.1'}),
            'conversion_function' : lambda x: float(x)/10
            },
            {
            'name'          : 'output_percent',
            'poll_function' : (get, {'oid':'1.3.6.1.4.1.476.1.42.3.5.2.2.1.11.3'}),
            'conversion_function' : lambda x: float(x)/10
            },
            {
            'name'          : 'output_power',
            'poll_function' : (get, {'oid':'1.3.6.1.4.1.476.1.42.3.5.2.2.1.8.3'}),
            },
            {
            'name'          : 'output_source',
            'poll_function' : (get, {'oid':'1.3.6.1.2.1.33.1.4.1.0'}),
            'conversion_function' : helpers.RFC1628_outputsource
            },
            {
            'name'          : 'battery_voltage',
            'poll_function' : (get, {'oid':'1.3.6.1.2.1.33.1.2.5.0'}),
            'conversion_function' : lambda x: float(x)/10
            },
            {
            'name'          : 'battery_percent',
            'poll_function' : (get, {'oid':'1.3.6.1.2.1.33.1.2.4.0'}),
            },
            {
            'name'          : 'battery_timeremaining',
            'poll_function' : (get, {'oid':'1.3.6.1.2.1.33.1.2.3.0'}),
            },
            {
            'name'          : 'system_temperature',
            'poll_function' : (get, {'oid':'1.3.6.1.4.1.476.1.42.3.4.1.2.3.1.3.1'}),
            },
            {
            'name'          : 'system_alarm',
            'poll_function' : (get, {'oid':'1.3.6.1.2.1.33.1.6.1.0'}),
            'conversion_function' : helpers.RFC1628_alarmspresent
            }
        ],
    
    '_pollspecpoint' : 'system_alarm'
}


"""
complete OID list for liebert GXT3:

'1.3.6.1.2.1.1.1.0':'sysDescr',
'1.3.6.1.2.1.1.2.0':'sysObjectID',
'1.3.6.1.2.1.1.3.0':'sysUpTime',
'1.3.6.1.2.1.1.4.0':'sysContact',
'1.3.6.1.2.1.1.5.0':'sysName',
'1.3.6.1.2.1.1.6.0':'sysLocation',
'1.3.6.1.4.1.476.1.42.2.1.1.0':'lgpAgentIdentManufacturer',
'1.3.6.1.4.1.476.1.42.2.1.2.0':'lgpAgentIdentModel',
'1.3.6.1.4.1.476.1.42.2.1.3.0':'lgpAgentIdentFirmwareVersion',
'1.3.6.1.4.1.476.1.42.2.1.4.0':'lgpAgentIdentSerialNumber',
'1.3.6.1.4.1.476.1.42.2.1.5.0':'lgpAgentIdentPartNumber',
'1.3.6.1.4.1.476.1.42.2.4.2.1.1.1':'lgpAgentDeviceIndex',
'1.3.6.1.4.1.476.1.42.2.4.2.1.2.1':'lgpAgentDeviceId',
'1.3.6.1.4.1.476.1.42.2.4.2.1.3.1':'lgpAgentDeviceManufacturer',
'1.3.6.1.4.1.476.1.42.2.4.2.1.4.1':'lgpAgentDeviceModel',
'1.3.6.1.4.1.476.1.42.2.4.2.1.5.1':'lgpAgentDeviceFirmwareVersion',
'1.3.6.1.4.1.476.1.42.2.4.2.1.6.1':'lgpAgentDeviceUnitNumber',
'1.3.6.1.4.1.476.1.42.2.4.2.1.7.1':'lgpAgentDeviceSerialNumber',
'1.3.6.1.4.1.476.1.42.2.4.2.1.8.1':'lgpAgentDeviceManufactureDate',
'1.3.6.1.4.1.476.1.42.2.5.1.0':'lgpAgentReboot',
'1.3.6.1.2.1.33.1.1.1.0':'upsIdentManufacturer',
'1.3.6.1.2.1.33.1.1.2.0':'upsIdentModel',
'1.3.6.1.2.1.33.1.1.3.0':'upsIdentUPSSoftwareVersion',
'1.3.6.1.2.1.33.1.1.4.0':'upsIdentAgentSoftwareVersion',
'1.3.6.1.2.1.33.1.1.5.0':'upsIdentName',
'1.3.6.1.2.1.33.1.2.1.0':'upsBatteryStatus',
'1.3.6.1.2.1.33.1.2.2.0':'upsSecondsOnBattery',
'1.3.6.1.2.1.33.1.2.3.0':'upsEstimatedMinutesRemaining',
'1.3.6.1.2.1.33.1.2.4.0':'upsEstimatedChargeRemaining',
'1.3.6.1.2.1.33.1.2.5.0':'upsBatteryVoltage',
'1.3.6.1.2.1.33.1.3.1.0':'upsInputLineBads',
'1.3.6.1.2.1.33.1.3.2.0':'upsInputNumLines',
'1.3.6.1.2.1.33.1.3.3.1.2.1':'upsInputFrequency',
'1.3.6.1.2.1.33.1.3.3.1.3.1':'upsInputVoltage',
'1.3.6.1.2.1.33.1.3.3.1.4.1':'upsInputCurrent',
'1.3.6.1.2.1.33.1.4.1.0':'upsOutputSource',
'1.3.6.1.2.1.33.1.4.2.0':'upsOutputFrequency',
'1.3.6.1.2.1.33.1.4.3.0':'upsOutputNumLines',
'1.3.6.1.2.1.33.1.4.4.1.2.1':'upsOutputVoltage',
'1.3.6.1.2.1.33.1.4.4.1.3.1':'upsOutputCurrent',
'1.3.6.1.2.1.33.1.5.1.0':'upsBypassFrequency',
'1.3.6.1.2.1.33.1.5.2.0':'upsBypassNumLines',
'1.3.6.1.2.1.33.1.5.3.1.2.1':'upsBypassVoltage',
'1.3.6.1.2.1.33.1.5.3.1.3.1':'upsBypassCurrent',
'1.3.6.1.2.1.33.1.6.1.0':'upsAlarmsPresent',
'1.3.6.1.2.1.33.1.7.1.0':'upsTestId',
'1.3.6.1.2.1.33.1.7.2.0':'upsTestSpinLock',
'1.3.6.1.2.1.33.1.7.3.0':'upsTestResultsSummary',
'1.3.6.1.2.1.33.1.7.4.0':'upsTestResultsDetail',
'1.3.6.1.2.1.33.1.7.5.0':'upsTestStartTime',
'1.3.6.1.2.1.33.1.7.6.0':'upsTestElapsedTime',
'1.3.6.1.2.1.33.1.8.1.0':'upsShutdownType',
'1.3.6.1.2.1.33.1.8.2.0':'upsShutdownAfterDelay',
'1.3.6.1.2.1.33.1.8.3.0':'upsStartupAfterDelay',
'1.3.6.1.2.1.33.1.8.4.0':'upsRebootWithDuration',
'1.3.6.1.2.1.33.1.8.5.0':'upsAutoRestart',
'1.3.6.1.2.1.33.1.9.1.0':'upsConfigInputVoltage',
'1.3.6.1.2.1.33.1.9.2.0':'upsConfigInputFreq',
'1.3.6.1.2.1.33.1.9.3.0':'upsConfigOutputVoltage',
'1.3.6.1.2.1.33.1.9.4.0':'upsConfigOutputFreq',
'1.3.6.1.2.1.33.1.9.5.0':'upsConfigOutput',
'1.3.6.1.2.1.33.1.9.7.0':'upsConfigLowBattTime',
'1.3.6.1.2.1.33.1.9.8.0':'upsConfigAudibleStatus',
'1.3.6.1.4.1.476.1.42.3.2.2.0':'lgpConditionsPresent',
'1.3.6.1.4.1.476.1.42.3.4.1.2.3.1.1.1':'lgpEnvTemperatureIdDegF',
'1.3.6.1.4.1.476.1.42.3.4.1.2.3.1.1.2':'lgpEnvTemperatureIdDegF',
'1.3.6.1.4.1.476.1.42.3.4.1.2.3.1.2.1':'lgpEnvTemperatureDescrDegF',
'1.3.6.1.4.1.476.1.42.3.4.1.2.3.1.2.2':'lgpEnvTemperatureDescrDegF',
'1.3.6.1.4.1.476.1.42.3.4.1.2.3.1.3.1':'lgpEnvTemperatureMeasurementDegF',
'1.3.6.1.4.1.476.1.42.3.4.1.3.3.1.1.1':'lgpEnvTemperatureIdDegC',
'1.3.6.1.4.1.476.1.42.3.4.1.3.3.1.1.2':'lgpEnvTemperatureIdDegC',
'1.3.6.1.4.1.476.1.42.3.4.1.3.3.1.2.1':'lgpEnvTemperatureDescrDegC',
'1.3.6.1.4.1.476.1.42.3.4.1.3.3.1.2.2':'lgpEnvTemperatureDescrDegC',
'1.3.6.1.4.1.476.1.42.3.4.1.3.3.1.3.1':'lgpEnvTemperatureMeasurementDegC',
'1.3.6.1.4.1.476.1.42.3.5.1.10.0':'lgpPwrBatteryFloatVoltage',
'1.3.6.1.4.1.476.1.42.3.5.1.14.0':'lgpPwrBatteryChargeStatus',
'1.3.6.1.4.1.476.1.42.3.5.1.16.0':'lgpPwrBatteryCharger',
'1.3.6.1.4.1.476.1.42.3.5.1.18.0':'lgpPwrBatteryTimeRemaining',
'1.3.6.1.4.1.476.1.42.3.5.1.19.0':'lgpPwrBatteryCapacity',
'1.3.6.1.4.1.476.1.42.3.5.1.20.1.0':'lgpPwrBatteryCabinetCount',
'1.3.6.1.4.1.476.1.42.3.5.1.20.2.0':'lgpPwrBatteryCabinetType',
'1.3.6.1.4.1.476.1.42.3.5.1.20.3.0':'lgpPwrBatteryCabinetRatedCapacity',
'1.3.6.1.4.1.476.1.42.3.5.1.5.0':'lgpPwrConfigLowBatteryWarningTime',
'1.3.6.1.4.1.476.1.42.3.5.1.8.0':'lgpPwrBatteryTestResult',
'1.3.6.1.4.1.476.1.42.3.5.1.9.0':'lgpPwrNominalBatteryCapacity',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.11.3':'lgpPwrMeasurementPointVAPercent',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.14.1':'lgpPwrMeasurementPointNomCurrent',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.15.3':'lgpPwrMeasurementPointNomPowerFactor',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.16.3':'lgpPwrMeasurementPointNomVA',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.2.1':'lgpPwrMeasurementPointId',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.2.2':'lgpPwrMeasurementPointId',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.2.3':'lgpPwrMeasurementPointId',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.3.1':'lgpPwrMeasurementPointNumLines',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.3.2':'lgpPwrMeasurementPointNumLines',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.3.3':'lgpPwrMeasurementPointNumLines',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.4.1':'lgpPwrMeasurementPointNomVolts',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.4.2':'lgpPwrMeasurementPointNomVolts',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.4.3':'lgpPwrMeasurementPointNomVolts',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.5.1':'lgpPwrMeasurementPointNomFrequency',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.5.3':'lgpPwrMeasurementPointNomFrequency',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.6.1':'lgpPwrMeasurementPointFrequency',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.6.2':'lgpPwrMeasurementPointFrequency',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.6.3':'lgpPwrMeasurementPointFrequency',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.7.3':'lgpPwrMeasurementPointApparentPower',
'1.3.6.1.4.1.476.1.42.3.5.2.2.1.8.3':'lgpPwrMeasurementPointTruePower',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.16.1.1':'lgpPwrLineMeasurementMaxVolts',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.16.3.1':'lgpPwrLineMeasurementMaxVolts',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.17.1.1':'lgpPwrLineMeasurementMinVolts',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.17.3.1':'lgpPwrLineMeasurementMinVolts',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.20.1.1':'lgpPwrLineMeasurementVolts',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.20.2.1':'lgpPwrLineMeasurementVolts',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.20.3.1':'lgpPwrLineMeasurementVolts',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.3.1.1':'lgpPwrMeasurementPoint',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.3.2.1':'lgpPwrMeasurementPoint',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.3.3.1':'lgpPwrMeasurementPoint',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.6.1.1':'lgpPwrLineMeasurementCurrent',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.6.2.1':'lgpPwrLineMeasurementCurrent',
'1.3.6.1.4.1.476.1.42.3.5.2.3.1.6.3.1':'lgpPwrLineMeasurementCurrent',
'1.3.6.1.4.1.476.1.42.3.5.2.4.1.2.1':'lgpPwrDcMeasurementPointId',
'1.3.6.1.4.1.476.1.42.3.5.2.4.1.3.1':'lgpPwrDcMeasurementPointSubID',
'1.3.6.1.4.1.476.1.42.3.5.2.4.1.4.1':'lgpPwrDcMeasurementPointVolts',
'1.3.6.1.4.1.476.1.42.3.5.2.4.1.6.1':'lgpPwrDcMeasurementPointNomVolts',
'1.3.6.1.4.1.476.1.42.3.5.3.10.0':'lgpPwrOutputToLoadOnBypass',
'1.3.6.1.4.1.476.1.42.3.5.3.13.0':'lgpPwrShutdownOverTemperature',
'1.3.6.1.4.1.476.1.42.3.5.3.14.0':'lgpPwrShutdownOverload',
'1.3.6.1.4.1.476.1.42.3.5.3.15.0':'lgpPwrShutdownDcBusOverload',
'1.3.6.1.4.1.476.1.42.3.5.3.16.0':'lgpPwrShutdownOutputShort',
'1.3.6.1.4.1.476.1.42.3.5.3.17.0':'lgpPwrShutdownLineSwap',
'1.3.6.1.4.1.476.1.42.3.5.3.18.0':'lgpPwrShutdownLowBattery',
'1.3.6.1.4.1.476.1.42.3.5.3.19.0':'lgpPwrShutdownRemote',
'1.3.6.1.4.1.476.1.42.3.5.3.20.0':'lgpPwrShutdownInputUnderVoltage',
'1.3.6.1.4.1.476.1.42.3.5.3.21.0':'lgpPwrShutdownPowerFactorCorrectionFailure',
'1.3.6.1.4.1.476.1.42.3.5.3.22.0':'lgpPwrShutdownHardware',
'1.3.6.1.4.1.476.1.42.3.5.3.27.0':'lgpPwrPowerFactorCorrection',
'1.3.6.1.4.1.476.1.42.3.5.3.6.0':'lgpPwrDcToDcconverter',
'1.3.6.1.4.1.476.1.42.3.5.3.7.0':'lgpPwrOutputToLoadOnInverter',
'1.3.6.1.4.1.476.1.42.3.5.3.9.0':'lgpPwrInverterReady',
'1.3.6.1.4.1.476.1.42.3.5.4.15.0':'lgpPwrAutomaticBatteryTest',
'1.3.6.1.4.1.476.1.42.3.5.4.8.0':'lgpPwrUpsAutoRestart',
'1.3.6.1.4.1.476.1.42.3.5.4.9.0':'lgpPwrUpsAutoRestartDelay',
'1.3.6.1.4.1.476.1.42.3.5.6.10.0':'lgpPwrOutputOffDelayWithoutRestart',
'1.3.6.1.4.1.476.1.42.3.5.6.3.0':'lgpPwrAlarmSilence',
'1.3.6.1.4.1.476.1.42.3.5.6.4.0':'lgpPwrBatteryTest',
'1.3.6.1.4.1.476.1.42.3.5.6.5.0':'lgpPwrUpsAbortCommand',
'1.3.6.1.4.1.476.1.42.3.5.6.8.0':'lgpPwrOutputOnDelay',
'1.3.6.1.4.1.476.1.42.3.5.6.9.0':'lgpPwrOutputOffDelayWithRestart',
'1.3.6.1.4.1.476.1.42.3.5.7.1.0':'lgpPwrUpsTopOffline',
'1.3.6.1.4.1.476.1.42.3.5.7.2.0':'lgpPwrUpsTopLineInteractive',
'1.3.6.1.4.1.476.1.42.3.5.7.3.0':'lgpPwrUPSTopDualInput',
'1.3.6.1.4.1.476.1.42.3.5.8.1.0':'lgpPwrBrownOutCount',
'1.3.6.1.4.1.476.1.42.3.5.8.2.0':'lgpPwrBlackOutCount',
'1.3.6.1.4.1.476.1.42.3.5.8.9.0':'lgpPwrStatisticsReset',
'1.3.6.1.4.1.476.1.42.3.7.3.1.0 ':'lgpSysAudibleAlarm' }
"""


